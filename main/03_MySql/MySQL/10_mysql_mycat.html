<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/305825 (zh-CN, DDL); Windows/10.0.10240 (Win64);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 14pt;
    }
  </style>
</head>
<body>
<a name="2839"/>

<div>
<span><div><font style="font-size: 18pt; color: rgb(186, 0, 255);">mycat是什么</font></div><div>    数据库中间件  （前身是阿里的cobar）</div><div><br/></div><div><font style="font-size: 18pt; color: rgb(186, 0, 255);">mycat是干什么的</font></div><div>1、读写分离</div><div>2、数据分片</div><div>     垂直拆分</div><div>     水平拆分</div><div>     垂直+水平拆分<br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><img src="10_mysql_mycat_files/Image.png" type="image/png" data-filename="" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div></div><div><br/></div><div>3、多数据源整合</div><div><br/></div><div><font style="font-size: 18pt; color: rgb(186, 0, 255);">mycat原理</font></div><div>     拦截<br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;"> </span><span style="text-indent: 0mm; color: rgb(1, 1, 1);"><font face="微软雅黑" style="font-size: 14pt;">Mycat 的原理中最重要的一个动词是“拦截”，它拦截了用户发送过来的 SQL 语句，首先对 SQL 语句做了</font></span><span style="font-size: 14pt; font-family: 微软雅黑; color: rgb(1, 1, 1); text-indent: 0mm; line-height: 1.45;">一些特定的分析：如分片分析、路由分析、读写分离分析、缓存分析等，然后将此 SQL 发往后端的真实数据库，</span><span style="font-size: 14pt; font-family: 微软雅黑; color: rgb(1, 1, 1); text-indent: 0mm; line-height: 1.45;">并将返回的结果做适当的处理，最终再返回给用户</span></div><div><img src="10_mysql_mycat_files/Image [1].png" type="image/png" data-filename="" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);" width="633"/></div></div><div><font style="font-size: 14pt;"><span style="min-height: 13pt; color: rgb(20, 20, 20);">这种方式把数据库的分布式从代码中解耦出来，程序员察觉不出来后台使用</span><span style="min-height: 13pt; color: rgb(20, 20, 20);">mycat</span><span style="min-height: 13pt; color: rgb(20, 20, 20);">还是</span><span style="min-height: 13pt; color: rgb(20, 20, 20);">mysql</span><span style="min-height: 13pt; color: rgb(20, 20, 20);">。</span></font></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div>
<hr>
<a name="2845"/>

<div>
<span><div><span><font style="font-size: 18pt; color: rgb(186, 0, 255);">解压缩文件拷贝到Linux下 /usr/local/</font></span></div><div><br/></div><div><span><font style="font-size: 18pt; color: rgb(186, 0, 255);">三个文件</font></span></div><div><span>1、schema.xml</span></div><div><span>2、rule.xml</span></div><div><span>3、server.xml</span></div><div><br/></div><div><span><font style="font-size: 18pt; color: rgb(186, 0, 255);">启动前先修改 schema.xml</font></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;?xml version=&quot;1.0&quot;?&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;!DOCTYPE mycat:schema SYSTEM &quot;schema.dtd&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;mycat:schema xmlns:mycat=&quot;<a href="http://io.mycat/%22%3E">http://io.mycat/&quot;&gt;</a>;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">           &lt;!--逻辑库    name名称,   checkSQLschema         sqlMaxLimit 末尾是否要加 limit xxx--&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">      </span><font style="color: rgb(255, 0, 0);"><span style="text-indent: 0mm; font-family: Verdana; font-size: 10pt;"> </span> <span style="text-indent: 0mm; font-family: Verdana; font-size: 10pt;"><font>&lt;schema</font></span></font> <span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">name=&quot;TESTDB&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dn1&quot;&gt; &lt;/schema&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">            &lt;!--逻辑库    name名称,   dataHost 引用的哪个dataHost      database:对应mysql的database--&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">       </span> <span style="text-indent: 0mm; font-family: Verdana; font-size: 10pt;"><font style="color: rgb(255, 0, 0);">&lt;dataNode</font></span> <span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">name=&quot;dn1&quot; dataHost=&quot;localhost1&quot; database=&quot;db1&quot; /&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">       </span> <span style="text-indent: 0mm; font-family: Verdana; font-size: 10pt;"><font style="color: rgb(255, 0, 0);">&lt;dataHost</font></span> <span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">name=&quot;localhost1&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;0&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                          writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;!-- can have multi write hosts --&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">               </span> <span style="text-indent: 0mm; font-family: Verdana; font-size: 10pt;"><font style="color: rgb(255, 0, 0);">&lt;writeHost</font></span> <span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">host=&quot;hostM1&quot; url=&quot;localhost:3306&quot; user=&quot;root&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                                   password=&quot;123456&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;/writeHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;/dataHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;/mycat:schema&gt;</span></div></div><div><br/></div><div><font style="font-size: 18pt; color: rgb(186, 0, 255);">再修改server.xml</font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;user name=&quot;root&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;property name=&quot;password&quot;&gt;654321&lt;/property&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;property name=&quot;schemas&quot;&gt;TESTDB&lt;/property&gt;</span></div><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;/user&gt;</span></div></div><div><br/></div><div><font style="font-size: 18pt; color: rgb(186, 0, 255);">启动程序</font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><font style="font-size: 14pt;"><span style="min-height: 13pt; font-family: 宋体; color: rgb(20, 20, 20);">控制台启动</span> <span style="min-height: 13pt; font-family: 宋体; color: rgb(20, 20, 20);">：去</span><span style="min-height: 13pt; font-family: 'Segoe UI'; color: rgb(20, 20, 20);">mycat/bin</span> <span style="min-height: 13pt; font-family: 宋体; color: rgb(20, 20, 20);">目录下</span> <span style="min-height: 13pt; font-family: 'Segoe UI'; color: rgb(20, 20, 20);">mycat console</span></font></div><div><font style="font-size: 14pt;"><span style="min-height: 13pt; font-family: 宋体; color: rgb(20, 20, 20);">后台启动</span> <span style="min-height: 13pt; font-family: 宋体; color: rgb(20, 20, 20);">：去</span><span style="min-height: 13pt; font-family: 'Segoe UI'; color: rgb(20, 20, 20);">mycat/bin</span> <span style="min-height: 13pt; font-family: 宋体; color: rgb(20, 20, 20);">目录下</span> <span style="min-height: 13pt; font-family: 'Segoe UI'; color: rgb(20, 20, 20);">mycat start</span></font></div></div><div><br/></div><div><font style="font-size: 18pt; color: rgb(186, 0, 255);">启动时可能出现报错</font></div><div>     域名解析失败</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><img src="10_mysql_mycat_files/Image [2].png" type="image/png" data-filename="" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div></div><div><br/></div><div><font style="font-size: 14pt;"><span style="min-height: 13pt; color: rgb(20, 20, 20);">1</span><span style="min-height: 13pt; color: rgb(20, 20, 20);">、用</span><span style="min-height: 13pt; color: rgb(20, 20, 20);">vim</span> <span style="min-height: 13pt; color: rgb(20, 20, 20);">修改</span> <span style="min-height: 13pt; color: rgb(20, 20, 20);">/etc/hosts</span> <span style="min-height: 13pt; color: rgb(20, 20, 20);">文件</span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">在 127.0.0.1 后面增加你的机器名</span></div><div><img src="10_mysql_mycat_files/Image [3].png" type="image/png" data-filename="" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);" width="696"/></div></div><div><span style="font-size: 14pt; line-height: 1.45; min-height: 13pt; color: rgb(20, 20, 20);">2</span><span style="font-size: 14pt; line-height: 1.45; min-height: 13pt; color: rgb(20, 20, 20);">、修改后重新启动网络服务</span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><img src="10_mysql_mycat_files/Image [4].png" type="image/png" data-filename="" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div></div><div><br/></div><div><font style="font-size: 18pt; color: rgb(186, 0, 255);">登录</font></div><div>   后台管理窗口</div><div><font style="font-size: 14pt;"><span style="min-height: 11pt; font-family: 'Segoe UI'; color: rgb(20, 20, 20);">mysql -uroot -p654321</span> <span style="min-height: 11pt; font-family: 'Segoe UI'; color: rgb(255, 0, 0);">-P9066 -h192.168.67.131</span></font></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">show database</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm; min-height: 76pt;"><img src="10_mysql_mycat_files/Image [5].png" type="image/png" data-filename="" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);" width="191"/></div><div style="margin: 0.99mm 0mm 1.99mm; text-indent: 0mm; min-height: 6pt;"><span style="text-indent: 0mm; min-height: 6pt; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;"> </span><span style="color: rgb(1, 1, 1); font-family: Verdana; font-size: 10pt; line-height: 1.45; text-indent: 0mm;">show @@help</span></div><div><img src="10_mysql_mycat_files/Image [6].png" type="image/png" data-filename="" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);" width="640"/></div></div><div>  数据窗口</div><div><font style="font-size: 14pt;"><span style="min-height: 11pt; font-family: 'Segoe UI'; color: rgb(20, 20, 20);">mysql -uroot -p654321</span> <span style="min-height: 11pt; font-family: 'Segoe UI'; color: rgb(255, 0, 0);">-P8066 -h192.168.67.131</span></font></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div>
<hr>
<a name="2857"/>

<div>
<span><div><span><font color="#BA00FF" style="font-size: 18pt;">主从复制</font></span></div><div><span><font color="#BA00FF" style="font-size: 18pt;">schema.xml</font></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;?xml version=&quot;1.0&quot;?&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;!DOCTYPE mycat:schema SYSTEM &quot;schema.dtd&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;mycat:schema xmlns:mycat=&quot;<a href="http://io.mycat/%22%3E">http://io.mycat/&quot;&gt;</a>;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;"> </span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;schema name=&quot;TESTDB&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dn1&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;/schema&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;dataNode name=&quot;dn1&quot; dataHost=&quot;host1&quot; database=&quot;atguigu_mc&quot; /&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;dataHost name=&quot;host1&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot;</span> <span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">balance=&quot;2&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                          writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot; slaveThreshold=&quot;100&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;writeHost host=&quot;hostm1&quot; url=&quot;192.168.67.1:3306&quot; user=&quot;root&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                                   password=&quot;123123&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm; min-height: 0pt;"><span style="text-indent: 0mm; min-height: 0pt; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;!--读库（从库）的配置 --&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">                       &lt;readHost host=&quot;hosts1&quot; url=&quot;192.168.67.131:3306&quot; user=&quot;root&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">                                   password=&quot;123123&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">                       &lt;/readHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;/writeHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;/dataHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;/mycat:schema&gt;</span></div><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;"> </span></div></div><div><br/></div><div><font style="color: rgb(186, 0, 255); font-size: 18pt;">balance</font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="text-indent: 0mm; min-height: 0pt; font-family: Verdana; color: rgb(1, 1, 1);"><font style="font-size: 14pt;">负载均衡类型，目前的取值有 3 种：</font></span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm; min-height: 0pt;"><span style="text-indent: 0mm; min-height: 0pt; font-family: Verdana; color: rgb(1, 1, 1);"><font style="font-size: 14pt;">1. balance=&quot;0&quot;, 不开启读写分离机制，所有读操作都发送到当前可用的 writeHost 上。</font></span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1);"><font style="font-size: 14pt;">2. balance=&quot;1&quot;，全部的 readHost 与 stand by writeHost 参与 select 语句的负载均衡，简单的说，当双主双从模式(M1-&gt;S1，M2-&gt;S2，并且 M1 与 M2 互为主备)，正常情况下，M2,S1,S2 都参与 select 语句的负载均衡。</font></span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm; min-height: 0pt;"><span style="text-indent: 0mm; min-height: 0pt; font-family: Verdana; color: rgb(1, 1, 1);"><font style="font-size: 14pt;">3. balance=&quot;2&quot;，所有读操作都随机的在 writeHost、readhost 上分发。</font></span></div><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1);"><font style="font-size: 14pt;">4. balance=&quot;3&quot;，所有读请求随机的分发到 wiriterHost 对应的 readhost 执行，writerHost 不负担读压力</font></span></div></div><div><br/></div><div><font style="font-size: 18pt; color: rgb(186, 0, 255);">读写分离</font></div><div>1、创建表</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><font style="font-size: 14pt;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1);">create table</span> <span style="text-indent: 0mm; font-family: 'Segoe UI'; color: rgb(20, 20, 20);">t_replica</span></font></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: 'Segoe UI'; color: rgb(20, 20, 20);"><font style="font-size: 14pt;">(    id  int auto_increment ,</font></span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: 'Segoe UI'; color: rgb(20, 20, 20);"><font style="font-size: 14pt;">     name varchar(200)</font></span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: 'Segoe UI'; color: rgb(20, 20, 20);"><font style="font-size: 14pt;">);</font></span></div></div><div><span style="line-height: 1.45;">2、</span><font style="line-height: 1.45; font-size: 14pt;"><span style="min-height: 13pt; color: rgb(20, 20, 20);">分别在两个库下插入：</span><span style="min-height: 13pt; color: rgb(20, 20, 20);">insert into t_replica(name) values (@@hostname)</span></font></div><div><font><span style="min-height: 13pt; color: rgb(20, 20, 20);"><span style="font-size: 14pt;">3、</span><font style="font-size: 14pt;"><span style="min-height: 13pt; color: rgb(20, 20, 20);">然后再</span><span style="min-height: 13pt; color: rgb(20, 20, 20);">mycat</span><span style="min-height: 13pt; color: rgb(20, 20, 20);">下执行</span><span style="min-height: 13pt; color: rgb(20, 20, 20);">select * from t_replica</span><span style="min-height: 13pt; color: rgb(20, 20, 20);">能够</span></font></span></font></div><div><br/></div><div><br/></div><div><font color="#BA00FF" style="font-size: 18pt;">分库</font></div><div><font color="#BA00FF" style="font-size: 18pt;">   创建表</font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="text-indent: 0mm; min-height: 0pt; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">#客户表  rows:20万</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">CREATE TABLE customer(</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    id INT AUTO_INCREMENT,</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    NAME VARCHAR(200),</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    PRIMARY KEY(id)</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">)</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm; min-height: 0pt;"><span style="text-indent: 0mm; min-height: 0pt; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">#订单表   rows:600万</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">CREATE TABLE orders(</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    id INT AUTO_INCREMENT,</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    order_type INT,</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    customer_id INT,</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    amount DECIMAL(10,2),</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    PRIMARY KEY(id)</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">);</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm; min-height: 0pt;"><span style="text-indent: 0mm; min-height: 0pt; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">#订单详细表     rows:600万</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">CREATE TABLE orders_detail(</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    id INT AUTO_INCREMENT,</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    detail VARCHAR(2000),</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    order_id INT,</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    PRIMARY KEY(id)</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">);</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm; min-height: 0pt;"><span style="text-indent: 0mm; min-height: 0pt; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">#订单状态字典表   rows:20</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">CREATE TABLE dict_order_type(</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    id INT AUTO_INCREMENT,</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    order_type VARCHAR(200),</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    PRIMARY KEY(id)</span></div><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">);</span></div></div><div><br/></div><div><font style="font-size: 18pt; color: rgb(186, 0, 255);">schema.xml</font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;mycat:schema xmlns:mycat=&quot;<a href="http://io.mycat/%22%3E">http://io.mycat/&quot;&gt;</a>;</span></div><div style="margin: 0.99mm 0mm 1.99mm; text-indent: 0mm; min-height: 9pt;"><span style="text-indent: 0mm; min-height: 9pt; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;"> </span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;schema name=&quot;TESTDB&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dn1&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">               </span> <span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">&lt;table name=&quot;customer&quot; dataNode=&quot;dn2&quot; &gt;&lt;/table&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;/schema&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;dataNode name=&quot;dn1&quot; dataHost=&quot;host1&quot; database=&quot;atguigu_mc&quot; /&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">       </span> <span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">&lt;dataNode name=&quot;dn2&quot; dataHost=&quot;host2&quot; database=&quot;atguigu_sm&quot; /&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;dataHost name=&quot;host1&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;2&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                          writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;writeHost host=&quot;hostm1&quot; url=&quot;192.168.67.1:3306&quot; user=&quot;root&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                                   password=&quot;123123&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                       &lt;readHost host=&quot;hosts1&quot; url=&quot;192.168.67.131:3306&quot; user=&quot;root&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                                   password=&quot;123123&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                       &lt;/readHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;/writeHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;/dataHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">       </span> <span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">&lt;dataHost name=&quot;host2&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;0&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">                          writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">                &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">                &lt;writeHost host=&quot;hostm2&quot; url=&quot;192.168.67.1:3306&quot; user=&quot;root&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">                                   password=&quot;123123&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">                &lt;/writeHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">        &lt;/dataHost&gt;</span></div><div style="margin: 0.99mm 0mm 1.99mm; text-indent: 0mm; min-height: 9pt;"><span style="text-indent: 0mm; min-height: 9pt; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;"> </span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm; min-height: 6pt;"><span style="text-indent: 0mm; min-height: 6pt; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;/mycat:schema&gt;</span></div></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div>
<hr>
<a name="2859"/>

<div>
<span><div><span><font style="font-size: 18pt; color: rgb(186, 0, 255);">schema.xml</font></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;?xml version=&quot;1.0&quot;?&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;!DOCTYPE mycat:schema SYSTEM &quot;schema.dtd&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;mycat:schema xmlns:mycat=&quot;<a href="http://io.mycat/%22%3E">http://io.mycat/&quot;&gt;</a>;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">      &lt;schema name=&quot;TESTDB&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dn1&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;table name=&quot;customer&quot; dataNode=&quot;dn2&quot; &gt;&lt;/table&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">               </span> <span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">&lt;table name=&quot;orders&quot; dataNode=&quot;dn1,dn2&quot; </span> <span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt; font-weight: bold;">rule=&quot;mod_rule&quot;</span> <span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">&gt;&lt;/table&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;/schema&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;dataNode name=&quot;dn1&quot; dataHost=&quot;host1&quot; database=&quot;atguigu_mc&quot; /&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;dataNode name=&quot;dn2&quot; dataHost=&quot;host2&quot; database=&quot;atguigu_sm&quot; /&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;dataHost name=&quot;host1&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;2&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                          writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;writeHost host=&quot;hostm1&quot; url=&quot;192.168.67.1:3306&quot; user=&quot;root&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                                   password=&quot;123123&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">               </span> <span style="text-indent: 0mm; font-family: Verdana; color: rgb(153, 204, 0); font-size: 10pt;">&lt;!--       &lt;readHost host=&quot;hosts1&quot; url=&quot;192.168.67.131:3306&quot; user=&quot;root&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(153, 204, 0); font-size: 10pt;">                                   password=&quot;123123&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(153, 204, 0); font-size: 10pt;">                       &lt;/readHost&gt;--&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;/writeHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;/dataHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;dataHost name=&quot;host2&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;0&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                          writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;writeHost host=&quot;hostm2&quot; url=&quot;192.168.67.1:3306&quot; user=&quot;root&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                                   password=&quot;123123&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;/writeHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;/dataHost&gt;</span></div><div><br/></div></div><div><font style="font-size: 18pt; color: rgb(186, 0, 255);">rule.xml<span style="line-height: 1.45;"> </span></font></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm; min-height: 6pt;"><span style="text-indent: 0mm; min-height: 6pt; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;tableRule name=&quot;</span><span style="text-indent: 0mm; min-height: 6pt; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt; font-weight: bold;">mod_rule</span><span style="text-indent: 0mm; min-height: 6pt; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">             &lt;rule&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                        &lt;columns&gt;</span><span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">id</span><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;/columns&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                        &lt;algorithm&gt;</span><span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">mod-long</span><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;/algorithm&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">               &lt;/rule&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">       &lt;/tableRule&gt;</span></div><div style="margin: 0.99mm 0mm 1.99mm; text-indent: 0mm; min-height: 6pt;"><span style="text-indent: 0mm; min-height: 6pt; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;"> </span></div><div style="margin: 0.99mm 0mm 1.99mm; text-indent: 0mm; min-height: 9pt;"><span style="text-indent: 0mm; min-height: 9pt; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;"> </span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm; min-height: 6pt;"><span style="text-indent: 0mm; min-height: 6pt; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;function name=&quot;</span><span style="text-indent: 0mm; min-height: 6pt; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">mod-long</span><span style="text-indent: 0mm; min-height: 6pt; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&quot; class=&quot;io.mycat.route.function.</span><span style="text-indent: 0mm; min-height: 6pt; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">PartitionByMod</span><span style="text-indent: 0mm; min-height: 6pt; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;!-- how many data nodes --&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;property name=&quot;count&quot;&gt;</span><span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 12pt; font-weight: bold;">2</span><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;/property&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;/function&gt;</span></div></div><div><br/></div><div><span style="line-height: 1.45;"><font style="font-size: 18pt; color: rgb(186, 0, 255);">全局序列</font></span></div><div><span style="line-height: 1.45;"> 三种方式</span></div><div><span style="line-height: 1.45;">1、本地文件</span></div><div><span style="line-height: 1.45;">       不推荐</span></div><div><span style="line-height: 1.45;">2、数据库方式</span></div><div><span style="line-height: 1.45;">       高并发性能低</span></div><div><span style="line-height: 1.45;">3、时间戳方式</span></div><div><span style="line-height: 1.45;">       比较长 18位</span></div><div>4、自主生成<span style="line-height: 1.45;">     </span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="min-height: 12pt; font-family: 宋体; color: rgb(20, 20, 20);"><font style="font-size: 14pt;">根据业务逻辑组合</font></span></div><div><font style="font-size: 14pt;"><span style="min-height: 13pt; font-family: 宋体; color: rgb(20, 20, 20);">可以利用</span> <span style="min-height: 13pt; font-family: 'Segoe UI'; color: rgb(20, 20, 20);">redis</span><span style="min-height: 13pt; font-family: 宋体; color: rgb(20, 20, 20);">的单线程原子性</span> <span style="min-height: 13pt; font-family: 'Segoe UI'; color: rgb(20, 20, 20);">incr</span><span style="min-height: 13pt; font-family: 宋体; color: rgb(20, 20, 20);">来生成序列</span></font></div></div><div> </div><div>  时间戳方式</div><div>    插入语句</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="text-indent: 0mm; font-family: Verdana;"><font style="font-size: 14pt;"><font color="#010101">insert into `orders`(id,amount,customer_id,order_type) values(</font><font style="color: rgb(255, 0, 0);">next value for MYCATSEQ_GLOBAL</font><font color="#010101">,1000,103,10);</font></font></span></div></div><div><span style="line-height: 1.45;">    server.xml </span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><font style="font-size: 14pt;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1);"> &lt;property name=&quot;sequnceHandlerType&quot;&gt;</span><span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0);">2</span><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1);">&lt;/property&gt;</span></font></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm; min-height: 0pt;"><span style="text-indent: 0mm; min-height: 0pt; font-family: Verdana; color: rgb(1, 1, 1);"><font style="font-size: 14pt;">0-本地文件方式</font></span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm; min-height: 0pt;"><span style="text-indent: 0mm; min-height: 0pt; font-family: Verdana; color: rgb(1, 1, 1);"><font style="font-size: 14pt;">1-数据库方式</font></span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm; min-height: 0pt;"><span style="text-indent: 0mm; min-height: 0pt; font-family: Verdana; color: rgb(1, 1, 1);"><font style="font-size: 14pt;">2-时间戳方式：</font></span></div></div><div><br/></div><div><br/></div><div><font style="font-size: 18pt; color: rgb(186, 0, 255);">夸库join</font></div><div>   全局表</div><div><font style="font-size: 14pt;">1、<span style="min-height: 12pt; color: rgb(20, 20, 20);">设定为全局的表，会直接复制给每个数据库一份，所有写操作也会同步给多个库。</span></font></div><div><span style="min-height: 12pt; color: rgb(20, 20, 20);"><font style="font-size: 14pt;">2、<span style="min-height: 12pt; color: rgb(20, 20, 20);">所以全局表一般不能是大数据表或者更新频繁的表</span></font></span></div><div><span style="min-height: 12pt; color: rgb(20, 20, 20);"><span style="min-height: 12pt; color: rgb(20, 20, 20);"><font style="font-size: 14pt;">3、<span style="min-height: 12pt; color: rgb(20, 20, 20);">一般是字典表或者系统表为宜。</span></font></span></span></div><div><span style="min-height: 12pt; color: rgb(20, 20, 20);"><span style="min-height: 12pt; color: rgb(20, 20, 20);"><span style="min-height: 12pt; color: rgb(20, 20, 20);"><font style="font-size: 14pt;">4、schema.xml</font></span></span></span></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;?xml version=&quot;1.0&quot;?&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;!DOCTYPE mycat:schema SYSTEM &quot;schema.dtd&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;mycat:schema xmlns:mycat=&quot;<a href="http://io.mycat/%22%3E">http://io.mycat/&quot;&gt;</a>;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;"> </span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;schema name=&quot;TESTDB&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dn1&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;table name=&quot;customer&quot; dataNode=&quot;dn2&quot; &gt;&lt;/table&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;table name=&quot;orders&quot; dataNode=&quot;dn1,dn2&quot; </span> <span style="text-indent: 0mm; font-family: Verdana; font-size: 10pt; font-weight: bold; color: rgb(51, 51, 51);">rule=&quot;</span><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">mod_rule</span><span style="text-indent: 0mm; font-family: Verdana; font-size: 10pt; font-weight: bold; color: rgb(51, 51, 51);">&quot;</span> <span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&gt;&lt;/table&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">                 &lt;table name=&quot;dict_order_type&quot; dataNode=&quot;dn1,dn2&quot; type=&quot;</span><span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt; font-weight: bold;">global</span><span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">&quot; &gt;&lt;/table&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;/schema&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;dataNode name=&quot;dn1&quot; dataHost=&quot;host1&quot; database=&quot;atguigu_mc&quot; /&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;dataNode name=&quot;dn2&quot; dataHost=&quot;host2&quot; database=&quot;atguigu_sm&quot; /&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;dataHost name=&quot;host1&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;2&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                          writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;writeHost host=&quot;hostm1&quot; url=&quot;192.168.67.1:3306&quot; user=&quot;root&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                                   password=&quot;123123&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">               </span> <span style="text-indent: 0mm; font-family: Verdana; color: rgb(153, 204, 0); font-size: 10pt;">&lt;!--       &lt;readHost host=&quot;hosts1&quot; url=&quot;192.168.67.131:3306&quot; user=&quot;root&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(153, 204, 0); font-size: 10pt;">                                   password=&quot;123123&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(153, 204, 0); font-size: 10pt;">                       &lt;/readHost&gt;--&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;/writeHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;/dataHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;dataHost name=&quot;host2&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;0&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                          writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;writeHost host=&quot;hostm2&quot; url=&quot;192.168.67.1:3306&quot; user=&quot;root&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                                   password=&quot;123123&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;/writeHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;/dataHost&gt;</span></div></div><div><br/></div><div><font style="font-size: 18pt; color: rgb(186, 0, 255);">   ER表</font></div><div>     为了相关联的表尽量分在一个库下</div><div>     schema.xml</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;?xml version=&quot;1.0&quot;?&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;!DOCTYPE mycat:schema SYSTEM &quot;schema.dtd&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;mycat:schema xmlns:mycat=&quot;<a href="http://io.mycat/%22%3E">http://io.mycat/&quot;&gt;</a>;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;"> </span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;schema name=&quot;TESTDB&quot; checkSQLschema=&quot;false&quot; sqlMaxLimit=&quot;100&quot; dataNode=&quot;dn1&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;table name=&quot;customer&quot; dataNode=&quot;dn2&quot; &gt;&lt;/table&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;table name=&quot;orders&quot; dataNode=&quot;dn1,dn2&quot;  rule=&quot;mod_rule&quot; &gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                   </span> <span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">&lt;childTable name=&quot;order_detail&quot; primaryKey=&quot;id&quot; joinKey=&quot;ordid&quot; parentKey=&quot;id&quot; /&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;/table&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;table name=&quot;dict_status&quot; dataNode=&quot;dn1,dn2&quot; type=&quot;global&quot; &gt;&lt;/table&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;/schema&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;dataNode name=&quot;dn1&quot; dataHost=&quot;host1&quot; database=&quot;atguigu_mc&quot; /&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;dataNode name=&quot;dn2&quot; dataHost=&quot;host2&quot; database=&quot;atguigu_sm&quot; /&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;dataHost name=&quot;host1&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;2&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                          writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;writeHost host=&quot;hostm1&quot; url=&quot;192.168.67.1:3306&quot; user=&quot;root&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                                   password=&quot;123123&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;!--       &lt;readHost host=&quot;hosts1&quot; url=&quot;192.168.67.131:3306&quot; user=&quot;root&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                                   password=&quot;123123&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                       &lt;/readHost&gt;--&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;/writeHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;/dataHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;dataHost name=&quot;host2&quot; maxCon=&quot;1000&quot; minCon=&quot;10&quot; balance=&quot;0&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                          writeType=&quot;0&quot; dbType=&quot;mysql&quot; dbDriver=&quot;native&quot; switchType=&quot;1&quot;  slaveThreshold=&quot;100&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;heartbeat&gt;select user()&lt;/heartbeat&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;writeHost host=&quot;hostm2&quot; url=&quot;192.168.67.1:3306&quot; user=&quot;root&quot;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                                   password=&quot;123123&quot;&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">                &lt;/writeHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">        &lt;/dataHost&gt;</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;"> </span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">&lt;/mycat:schema&gt;</span></div><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;"> </span></div></div><div><br/></div><div>  <font style="font-size: 18pt; color: rgb(186, 0, 255);"> federated引擎（Oracle：<span style="min-height: 12pt; font-family: Verdana;"><font>FBI  DBLINK</font></span>）</font></div><div>1、开启引擎</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;"> </span><span style="color: rgb(1, 1, 1); text-indent: 0mm; line-height: 1.45;"><font face="微软雅黑" style="font-size: 14pt;">修改my.cnf</font></span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm; min-height: 0pt;"><span style="text-indent: 0mm; min-height: 0pt; color: rgb(1, 1, 1);"><font face="微软雅黑" style="font-size: 14pt;">在[mysqld]下增加一行</font></span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; color: rgb(1, 1, 1);"><font face="微软雅黑" style="font-size: 14pt;">federated</font></span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; color: rgb(1, 1, 1);"><font face="微软雅黑" style="font-size: 14pt;">然后重启mysql</font></span></div><div><img src="10_mysql_mycat_files/Image [7].png" type="image/png" data-filename="" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);" width="935"/></div></div><div><br/></div><div>2、建表</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;"> CREATE TABLE customer(</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    id INT AUTO_INCREMENT,</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    NAME VARCHAR(200),</span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm;"><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">    PRIMARY KEY(id)</span></div><div><span style="text-indent: 0mm; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;">)</span><span style="text-indent: 0mm; font-family: Verdana; color: rgb(255, 0, 0); font-size: 10pt;">ENGINE=FEDERATED  CONNECTION=&quot;mysql://root:123123@192.168.67.141:3306/myorder/customer&quot;</span></div></div><div><br/></div><div>3、使用时的注意事项</div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="text-indent: 0mm; min-height: 0pt; font-family: Verdana; color: rgb(1, 1, 1); font-size: 10pt;"> </span> <span style="text-indent: 0mm; min-height: 0pt; color: rgb(1, 1, 1);"><font face="微软雅黑" style="font-size: 14pt;">1. 本地的表结构必须与远程的完全一样。</font></span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm; min-height: 0pt;"><span style="text-indent: 0mm; min-height: 0pt; color: rgb(1, 1, 1);"><font face="微软雅黑" style="font-size: 14pt;">  2.远程数据库目前仅限MySQL</font></span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm; min-height: 0pt;"><span style="text-indent: 0mm; min-height: 0pt; color: rgb(1, 1, 1);"><font face="微软雅黑" style="font-size: 14pt;">  3.不支持事务</font></span></div><div style="margin-left: 0mm; margin-right: 0mm; text-indent: 0mm; margin-top: 4.75mm; margin-bottom: 4.75mm; min-height: 0pt;"><span style="text-indent: 0mm; min-height: 0pt; color: rgb(1, 1, 1);"><font face="微软雅黑" style="font-size: 14pt;">  4.不支持表结构修改 ddl</font></span></div></div><div><br/></div><div>4、最大问题</div><div>        性能</div><div><br/></div><div><br/></div></span>
</div></body></html> 